(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{ialL:function(t,e,n){"use strict";n.r(e),n.d(e,"PlaysectionPageModule",(function(){return Q}));var o=n("SVse"),i=n("s7LF"),s=n("iInd"),r=n("sZkV"),c=n("mrSG"),l=n("tuxH"),a=n("Av7/"),b=n("8Y7J"),d=n("CcaC"),u=n("7LIg"),h=n("2fyD"),g=n("RJKo");const m=["info"],p=["correct"],f=["wrong"];function v(t,e){if(1&t&&(b.Lb(0,"ion-fab",10),b.Lb(1,"ion-fab-button",11),b.Lb(2,"ion-row"),b.Lb(3,"h5",12),b.kc(4),b.Kb(),b.Kb(),b.Kb(),b.Kb()),2&t){const t=b.Vb();b.xb(4),b.nc("",t.timeMinute," : ",t.timeSeconds," ")}}function C(t,e){if(1&t&&(b.Lb(0,"ion-item-divider"),b.Lb(1,"ion-segment"),b.Lb(2,"div",13,14),b.Lb(4,"ion-label",15),b.kc(5),b.Kb(),b.Kb(),b.Kb(),b.Lb(6,"ion-segment"),b.Lb(7,"div",13,16),b.Lb(9,"ion-label",17),b.kc(10),b.Kb(),b.Kb(),b.Kb(),b.Kb()),2&t){const t=b.Vb();b.xb(5),b.mc(" CORRECT : ",t.correctAns,""),b.xb(5),b.mc("WRONG : ",t.wrongAns," ")}}function x(t,e){if(1&t&&(b.Lb(0,"ion-card",18),b.Lb(1,"div",19),b.Lb(2,"h3",20),b.kc(3),b.Kb(),b.Kb(),b.Lb(4,"ion-card-title"),b.Lb(5,"p",21),b.kc(6),b.Kb(),b.Kb(),b.Kb()),2&t){const t=b.Vb();b.xb(3),b.mc(" ",t.runningQuestion+1,"/15 "),b.xb(3),b.mc("",null==t.currentQuestion?null:t.currentQuestion.question," ")}}function O(t,e){if(1&t){const t=b.Mb();b.Lb(0,"ion-card",22),b.Lb(1,"ion-button",23),b.Tb("click",(function(){b.gc(t);const e=b.Vb();return e.checkAnswer(null==e.currentQuestion?null:e.currentQuestion.option1,null==e.currentQuestion?null:e.currentQuestion.answer),e.getColor1()})),b.kc(2),b.Kb(),b.Lb(3,"ion-button",23),b.Tb("click",(function(){b.gc(t);const e=b.Vb();return e.checkAnswer(null==e.currentQuestion?null:e.currentQuestion.option2,null==e.currentQuestion?null:e.currentQuestion.answer),e.getColor2()})),b.kc(4),b.Kb(),b.Lb(5,"ion-button",23),b.Tb("click",(function(){b.gc(t);const e=b.Vb();return e.checkAnswer(null==e.currentQuestion?null:e.currentQuestion.option3,e.currentQuestion.answer),e.getColor3()})),b.kc(6),b.Kb(),b.Lb(7,"ion-button",23),b.Tb("click",(function(){b.gc(t);const e=b.Vb();return e.checkAnswer(null==e.currentQuestion?null:e.currentQuestion.option4,e.currentQuestion.answer),e.getColor4()})),b.kc(8),b.Kb(),b.Kb()}if(2&t){const t=b.Vb();b.xb(1),b.bc("color",t.btnColor1)("disabled",t.disableClick),b.xb(1),b.mc(" ",null==t.currentQuestion?null:t.currentQuestion.option1," "),b.xb(1),b.bc("color",t.btnColor2)("disabled",t.disableClick),b.xb(1),b.mc(" ",null==t.currentQuestion?null:t.currentQuestion.option2," "),b.xb(1),b.bc("color",t.btnColor3)("disabled",t.disableClick),b.xb(1),b.mc(" ",null==t.currentQuestion?null:t.currentQuestion.option3," "),b.xb(1),b.bc("color",t.btnColor4)("disabled",t.disableClick),b.xb(1),b.mc(" ",null==t.currentQuestion?null:t.currentQuestion.option4," ")}}function M(t,e){if(1&t){const t=b.Mb();b.Lb(0,"ion-button",38),b.Tb("click",(function(){return b.gc(t),b.Vb(2).startQuestion()})),b.kc(1," PLAY NOW !"),b.Kb()}}function k(t,e){if(1&t){const t=b.Mb();b.Lb(0,"div",24),b.Lb(1,"ion-card",25),b.Lb(2,"ion-item",11),b.Lb(3,"ion-label",26),b.kc(4,"select your category"),b.Kb(),b.Lb(5,"ion-select",27),b.Tb("ngModelChange",(function(e){return b.gc(t),b.Vb().selectChange(e)}))("ngModelChange",(function(e){return b.gc(t),b.Vb().model.filterOptions=e})),b.Lb(6,"ion-select-option",28),b.kc(7,"Economics"),b.Kb(),b.Lb(8,"ion-select-option",29),b.kc(9,"Sport"),b.Kb(),b.Lb(10,"ion-select-option",30),b.kc(11,"Movie"),b.Kb(),b.Lb(12,"ion-select-option",31),b.kc(13,"Science"),b.Kb(),b.Lb(14,"ion-select-option",32),b.kc(15,"History"),b.Kb(),b.Lb(16,"ion-select-option",33),b.kc(17,"Politics"),b.Kb(),b.Lb(18,"ion-select-option",34),b.kc(19,"Art"),b.Kb(),b.Lb(20,"ion-select-option",35),b.kc(21,"Tourism"),b.Kb(),b.Kb(),b.Kb(),b.Kb(),b.Lb(22,"div",36),b.jc(23,M,2,0,"ion-button",37),b.Kb(),b.Kb()}if(2&t){const t=b.Vb();b.xb(5),b.bc("ngModel",t.model.filterOptions),b.xb(18),b.bc("ngIf",!t.startGame)}}const w=function(){return["/account"]};function y(t,e){1&t&&(b.Lb(0,"div",39),b.Lb(1,"div",40),b.Lb(2,"ion-chip"),b.Lb(3,"ion-label",41),b.kc(4," YOUR ACCOUNT IS LOW! CLICK HERE "),b.Kb(),b.Jb(5,"br"),b.Jb(6,"ion-icon",42),b.Kb(),b.Kb(),b.Kb()),2&t&&(b.xb(6),b.bc("routerLink",b.cc(1,w)))}function L(t,e){1&t&&(b.Lb(0,"div",39),b.Lb(1,"div",43),b.Lb(2,"div",44),b.Jb(3,"div"),b.Jb(4,"div"),b.Jb(5,"div"),b.Jb(6,"div"),b.Jb(7,"div"),b.Jb(8,"div"),b.Jb(9,"div"),b.Jb(10,"div"),b.Kb(),b.Kb(),b.Lb(11,"p",45),b.kc(12," preparing questions..."),b.Kb(),b.Kb())}const P=[{path:"",component:(()=>{class t{constructor(t,e,n,o,i,s,r){this.userService=t,this.gameService=e,this.accountService=n,this.alertController=o,this.modalController=i,this.behaviorService=s,this.router=r,this.startGame=!1,this.correcQuestion=0,this.wrongQuestion=0,this.runningQuestion=0,this.timeMinute=0,this.timeSeconds=0,this.loadingGame=!1,this.correctAns=0,this.wrongAns=0,this.disableClick=!1,this.low_balance=!1,this.btnColor1="success",this.btnColor2="success",this.btnColor3="success",this.btnColor4="success",this.GameTimeMinute=0,this.GameTimeSeconds=0,this.model={filterOptions:[]}}ngOnInit(){this.behaviorService.getGameAmount().subscribe(t=>{console.log("see AMount",t),this.currentGameAmount=t,null===t&&this.getRemoteAmount()})}getRemoteAmount(){console.log("getting remote amoutn"),this.loadingGame=!0,this.gameService.getGameAmount().subscribe(t=>{this.behaviorService.setGameAmount(t.data.amount),this.loadingGame=!1},t=>{this.loadingGame=!1})}ionViewWillEnter(){this.gameService.getAdminDate(),this.getQuestionForGame(),console.log("will enter")}ngOnDestroy(){this.QuestionSub="",this.playCategory="",this.loadBalanceSub="",this.deductSub="",this.timeSeconds=0,this.timeMinute=0,clearInterval(this.timerTicker)}getColor1(){this.btnColor1="light"}getColor2(){this.btnColor2="light"}getColor3(){this.btnColor3="light"}getColor4(){this.btnColor4="light"}getQuestionForGame(){this.loadingGame=!0,this.QuestionSub=this.userService.getRandomQuestionsForGame().subscribe(t=>{this.gameQuestions=t.questions,this.lastQuestion=this.gameQuestions.length-1,this.loadingGame=!1},t=>{console.log(t)})}selectChange(t){this.playByCategory(t)}playByCategory(t){this.loadingGame=!0,this.playCategory=this.userService.playByCategory(t).subscribe(t=>{this.loadingGame=!1,this.gameQuestions=t.questions,this.lastQuestion=this.gameQuestions.length-1})}gameisOver(){this.GameTimeMinute=this.timeMinute,this.GameTimeSeconds=this.timeSeconds,this.gameOver=!0,this.loadingGame=!0,this.startGame=!1;const t=3-this.timeMinute,e=60-this.timeSeconds;let n=this.correctAns,o=this.wrongAns;15===n?this.presentCongratsModal(t,e,n):this.presentFailedModal(t,e,n),this.userService.postQuestionRecord({minutes:t,seconds:e,correct_qst:n,wrong_qst:o}).subscribe(t=>{this.loadingGame=!1,console.log("record submitted.."),this.gameOver=null,this.disableClick=!1,this.loadingGame=!1,this.startGame=!1,this.runningQuestion=0,this.playCategory="",this.loadBalanceSub="",this.deductSub="",this.timeSeconds=0,this.timeMinute=0,clearInterval(this.timerTicker)})}checkAnswer(t,e){this.disableClick=!0,t==e?(this.correct.nativeElement.classList.add("heartBeat"),this.correctAns=this.correctAns+1):(this.wrongAns=this.wrongAns+1,this.wrong.nativeElement.classList.add("wobble")),setTimeout(()=>{this.nextQuestion()},1e3)}startQuestion(){this.loadingGame=!0,this.loadBalanceSub=this.accountService.loadBalanceForCalculation().subscribe(t=>{t.balance<this.currentGameAmount?(this.low_balance=!0,setTimeout(()=>{this.low_balance=!1},7e3),this.loadingGame=!1):this.deductSub=this.accountService.deductGameAmountFromAccount().subscribe(t=>{console.log("PAY RES",t),this.accountService.loadMyBalance(),this.startGame=!0,this.currentQuestion=this.gameQuestions[this.runningQuestion],this.startTimer(),this.loadingGame=!1},t=>{console.log("ERROR",t)})},t=>{console.error(t),this.loadingGame=!1})}renderQuestion(){this.startGame=!0,this.disableClick=!1,this.currentQuestion=this.gameQuestions[this.runningQuestion]}nextQuestion(){this.btnColor1="success",this.btnColor2="success",this.btnColor3="success",this.btnColor4="success",this.wrong.nativeElement.classList.remove("wobble"),this.correct.nativeElement.classList.remove("heartBeat"),this.runningQuestion<this.lastQuestion?(this.runningQuestion++,this.renderQuestion()):(this.startGame=!1,this.gameOver=!0)}renderProgress(){for(let t=0;t<=this.lastQuestion;t++)this.progress=t}startTimer(){let t=240;t>0&&(this.timerTicker=setInterval(()=>{t--,(0==t||this.gameOver)&&(clearInterval(this.timerTicker),this.gameisOver(),t=0);let e=t;const n=Math.floor(e/60);e-=60*n,this.timeMinute=n,this.timeSeconds=e,this.gameOver&&clearInterval(this.timerTicker)},1e3))}gameOverToleaderboard(){this.gameOver=void 0,this.correctAns=0,this.wrongAns=0,this.router.navigate(["/leaderboard"])}gameOverToRecords(){this.gameOver=void 0,this.correctAns=0,this.wrongAns=0,this.router.navigate(["/myrecord"])}presentCongratsModal(t,e,n){return Object(c.a)(this,void 0,void 0,(function*(){const o=yield this.modalController.create({component:a.a,componentProps:{minutes:t,seconds:e,correctQuestion:n}});yield o.present(),yield o.onDidDismiss()}))}presentFailedModal(t,e,n){return Object(c.a)(this,void 0,void 0,(function*(){console.log("QSTTT",n);const o=yield this.modalController.create({component:l.a,componentProps:{minutes:t,seconds:e,correctQuestion:n}});yield o.present(),yield o.onDidDismiss()}))}presentResult(t,e,n){return Object(c.a)(this,void 0,void 0,(function*(){const o=yield this.alertController.create({header:" GAME RESULT",message:`<h1>Score  ${n}/15</h1>  <br>\n              <h4 class="text-success">Elapsed ${t} min , ${e} secs</h4>`,buttons:[{text:"OK",cssClass:"success",handler:t=>{this.router.navigate(["/tabs/gamesection"])}}]});yield o.present(),setTimeout(()=>{this.router.navigate(["/tabs/gamesection"]),o.dismiss()},3e3)}))}}return t.\u0275fac=function(e){return new(e||t)(b.Ib(d.a),b.Ib(u.a),b.Ib(h.a),b.Ib(r.a),b.Ib(r.gb),b.Ib(g.a),b.Ib(s.g))},t.\u0275cmp=b.Cb({type:t,selectors:[["app-playsection"]],viewQuery:function(t,e){var n;1&t&&(b.oc(m,!0),b.oc(p,!0),b.oc(f,!0)),2&t&&(b.ec(n=b.Ub())&&(e.info=n.first),b.ec(n=b.Ub())&&(e.correct=n.first),b.ec(n=b.Ub())&&(e.wrong=n.first))},decls:16,vars:7,consts:[["slot","start"],[1,"row","d-flex","justify-content-center"],["src","assets/img/ISABI LOGO GREEN.png",1,"rounded-top","logo"],[1,"play-area","content"],["vertical","top","horizontal","center","slot","fixed",4,"ngIf"],[4,"ngIf"],["slot","fixed","class","m-0 play-area","style","width: 100%;",4,"ngIf"],["slot","fixed","class","p-2","color","light",4,"ngIf"],["style","padding-top: 20%;",4,"ngIf"],["class"," ",4,"ngIf"],["vertical","top","horizontal","center","slot","fixed"],["color","success"],[1,"mt-2","p-3","font-weight-bold"],[1,"animated"],["correct",""],[1,"font-weight-bold","text-success"],["wrong",""],[1,"animated","font-weight-bold","text-danger"],["slot","fixed",1,"m-0","play-area",2,"width","100%"],[1,"justify-content-right","d-flex","ml-2"],["id","count",1,"font-weight-bold"],[1,"m-4","text-white"],["slot","fixed","color","light",1,"p-2"],["expand","full",1,"option","mb-3",3,"color","disabled","click"],[2,"padding-top","20%"],[1,"p-3"],["color","light",1,"text-center"],["select","success","interface","popover",3,"ngModel","ngModelChange"],["value","economics",1,"text-dark"],["color","success","value","sport"],["color","success","value","movie"],["color","success","value","science"],["color","success","value","history"],["color","success","value","politics"],["color","success","value","arts"],["color","success","value","tourism"],[1,"ion-text-center","ion-padding"],["color","success","size","large","color","success",3,"click",4,"ngIf"],["color","success","size","large","color","success",3,"click"],[1,""],[1,"toast-container","mb-5"],[1,"font-weight-bold","text-danger"],["size","large","name","wallet","color","success",3,"routerLink"],[1,"toast-container"],[1,"lds-roller"],[1,"bg-dark","text-white","text-center",2,"margin-top","30%"]],template:function(t,e){1&t&&(b.Lb(0,"ion-header"),b.Lb(1,"ion-toolbar"),b.Lb(2,"ion-buttons",0),b.Jb(3,"ion-menu-button"),b.Kb(),b.Lb(4,"div",1),b.Jb(5,"img",2),b.Kb(),b.Kb(),b.Kb(),b.Lb(6,"ion-content"),b.Lb(7,"div",3),b.jc(8,v,5,2,"ion-fab",4),b.jc(9,C,11,2,"ion-item-divider",5),b.jc(10,x,7,2,"ion-card",6),b.jc(11,O,9,12,"ion-card",7),b.jc(12,k,24,2,"div",8),b.Jb(13,"br"),b.jc(14,y,7,2,"div",9),b.jc(15,L,13,0,"div",9),b.Kb(),b.Kb()),2&t&&(b.xb(8),b.bc("ngIf",!e.gameOver),b.xb(1),b.bc("ngIf",e.startGame),b.xb(1),b.bc("ngIf",e.startGame),b.xb(1),b.bc("ngIf",e.startGame),b.xb(1),b.bc("ngIf",!e.loadingGame&&!e.startGame),b.xb(2),b.bc("ngIf",e.low_balance),b.xb(1),b.bc("ngIf",e.loadingGame))},directives:[r.v,r.bb,r.i,r.F,r.r,o.m,r.s,r.t,r.L,r.A,r.N,r.mb,r.B,r.j,r.n,r.h,r.z,r.P,i.g,i.j,r.Q,r.p,r.w,r.lb,s.h],styles:['ion-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70px;height:30px;padding:5px 0}.option[_ngcontent-%COMP%]{border-radius:10px #000;font-weight:700;color:#f7f7f7;margin-top:7px;margin-bottom:7px}.info[_ngcontent-%COMP%]{color:#fff;text-shadow:1px 1px 2px #057009,0 0 25px #04921c,0 0 5px #00008b}.content[_ngcontent-%COMP%]{background-image:url(bg.d35f34f0bcf0a4d191a9.png);height:100%;width:100%;position:fixed;background-position:50%;background-size:cover;background-repeat:no-repeat}.play-area[_ngcontent-%COMP%]{background-color:#00351a;color:#fff}.icon-bar[_ngcontent-%COMP%]{width:100%;background-color:#555;display:flex;overflow:auto}.play-area-header[_ngcontent-%COMP%]{background-color:#063;color:#fff}#count[_ngcontent-%COMP%]{border:10px;border-color:#000}.toast-container[_ngcontent-%COMP%]{position:fixed;display:flex;justify-content:center;top:auto;margin-bottom:80px;left:0;right:0;bottom:0;z-index:999}.lds-roller[_ngcontent-%COMP%]{display:inline-block;position:relative;width:64px;height:64px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{-webkit-animation:lds-roller 1.2s cubic-bezier(.5,0,.5,1) infinite;animation:lds-roller 1.2s cubic-bezier(.5,0,.5,1) infinite;transform-origin:32px 32px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;width:6px;height:6px;border-radius:50%;background:#fbfdfc;margin:-3px 0 0 -3px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{-webkit-animation-delay:-36ms;animation-delay:-36ms}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child:after{top:50px;left:50px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){-webkit-animation-delay:-72ms;animation-delay:-72ms}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2):after{top:54px;left:45px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){-webkit-animation-delay:-.108s;animation-delay:-.108s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3):after{top:57px;left:39px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){-webkit-animation-delay:-.144s;animation-delay:-.144s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4):after{top:58px;left:32px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5){-webkit-animation-delay:-.18s;animation-delay:-.18s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5):after{top:57px;left:25px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6){-webkit-animation-delay:-.216s;animation-delay:-.216s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6):after{top:54px;left:19px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7){-webkit-animation-delay:-.252s;animation-delay:-.252s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7):after{top:50px;left:14px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8){-webkit-animation-delay:-.288s;animation-delay:-.288s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8):after{top:45px;left:10px}@-webkit-keyframes lds-roller{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes lds-roller{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}#nominated[_ngcontent-%COMP%]{color:#fff;text-shadow:2px 2px 4px #000}#correct[_ngcontent-%COMP%]{color:#12e784;text-shadow:1px 1px 1px #025807}#correct[_ngcontent-%COMP%], #wrong[_ngcontent-%COMP%]{text-align:center}#wrong[_ngcontent-%COMP%]{color:#fc6b6b;text-shadow:1px 1px 2px #740303}.leaders[_ngcontent-%COMP%]{height:50px}']}),t})()}];let Q=(()=>{class t{}return t.\u0275mod=b.Gb({type:t}),t.\u0275inj=b.Fb({factory:function(e){return new(e||t)},imports:[[o.b,i.c,r.cb,s.k.forChild(P)]]}),t})()}}]);