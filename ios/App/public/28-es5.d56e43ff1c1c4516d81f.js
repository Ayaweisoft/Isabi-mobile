!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{ialL:function(n,o,i){"use strict";i.r(o),i.d(o,"PlaysectionPageModule",(function(){return S}));var r=i("SVse"),s=i("s7LF"),c=i("iInd"),a=i("sZkV"),l=i("mrSG"),u=i("tuxH"),b=i("Av7/"),d=i("8Y7J"),g=i("CcaC"),h=i("7LIg"),m=i("2fyD"),f=i("RJKo"),v=["info"],p=["correct"],C=["wrong"];function y(t,e){if(1&t&&(d.Lb(0,"ion-fab",10),d.Lb(1,"ion-fab-button",11),d.Lb(2,"ion-row"),d.Lb(3,"h5",12),d.lc(4),d.Kb(),d.Kb(),d.Kb(),d.Kb()),2&t){var n=d.Vb();d.yb(4),d.oc("",n.timeMinute," : ",n.timeSeconds," ")}}function x(t,e){if(1&t&&(d.Lb(0,"ion-item-divider"),d.Lb(1,"ion-segment"),d.Lb(2,"div",13,14),d.Lb(4,"ion-label",15),d.lc(5),d.Kb(),d.Kb(),d.Kb(),d.Lb(6,"ion-segment"),d.Lb(7,"div",13,16),d.Lb(9,"ion-label",17),d.lc(10),d.Kb(),d.Kb(),d.Kb(),d.Kb()),2&t){var n=d.Vb();d.yb(5),d.nc(" CORRECT : ",n.correctAns,""),d.yb(5),d.nc("WRONG : ",n.wrongAns," ")}}function k(t,e){if(1&t&&(d.Lb(0,"ion-card",18),d.Lb(1,"div",19),d.Lb(2,"h3",20),d.lc(3),d.Kb(),d.Kb(),d.Lb(4,"ion-card-title"),d.Lb(5,"p",21),d.lc(6),d.Kb(),d.Kb(),d.Kb()),2&t){var n=d.Vb();d.yb(3),d.nc(" ",n.runningQuestion+1,"/15 "),d.yb(3),d.nc("",null==n.currentQuestion?null:n.currentQuestion.question," ")}}function w(t,e){if(1&t){var n=d.Mb();d.Lb(0,"ion-card",22),d.Lb(1,"ion-button",23),d.Tb("click",(function(){d.gc(n);var t=d.Vb();return t.checkAnswer(null==t.currentQuestion?null:t.currentQuestion.option1,null==t.currentQuestion?null:t.currentQuestion.answer),t.getColor1()})),d.lc(2),d.Kb(),d.Lb(3,"ion-button",23),d.Tb("click",(function(){d.gc(n);var t=d.Vb();return t.checkAnswer(null==t.currentQuestion?null:t.currentQuestion.option2,null==t.currentQuestion?null:t.currentQuestion.answer),t.getColor2()})),d.lc(4),d.Kb(),d.Lb(5,"ion-button",23),d.Tb("click",(function(){d.gc(n);var t=d.Vb();return t.checkAnswer(null==t.currentQuestion?null:t.currentQuestion.option3,t.currentQuestion.answer),t.getColor3()})),d.lc(6),d.Kb(),d.Lb(7,"ion-button",23),d.Tb("click",(function(){d.gc(n);var t=d.Vb();return t.checkAnswer(null==t.currentQuestion?null:t.currentQuestion.option4,t.currentQuestion.answer),t.getColor4()})),d.lc(8),d.Kb(),d.Kb()}if(2&t){var o=d.Vb();d.yb(1),d.bc("color",o.btnColor1)("disabled",o.disableClick),d.yb(1),d.nc(" ",null==o.currentQuestion?null:o.currentQuestion.option1," "),d.yb(1),d.bc("color",o.btnColor2)("disabled",o.disableClick),d.yb(1),d.nc(" ",null==o.currentQuestion?null:o.currentQuestion.option2," "),d.yb(1),d.bc("color",o.btnColor3)("disabled",o.disableClick),d.yb(1),d.nc(" ",null==o.currentQuestion?null:o.currentQuestion.option3," "),d.yb(1),d.bc("color",o.btnColor4)("disabled",o.disableClick),d.yb(1),d.nc(" ",null==o.currentQuestion?null:o.currentQuestion.option4," ")}}function O(t,e){if(1&t){var n=d.Mb();d.Lb(0,"ion-button",38),d.Tb("click",(function(){return d.gc(n),d.Vb(2).startQuestion()})),d.lc(1," PLAY NOW !"),d.Kb()}}function M(t,e){if(1&t){var n=d.Mb();d.Lb(0,"div",24),d.Lb(1,"ion-card",25),d.Lb(2,"ion-item",11),d.Lb(3,"ion-label",26),d.lc(4,"select your category"),d.Kb(),d.Lb(5,"ion-select",27),d.Tb("ngModelChange",(function(t){return d.gc(n),d.Vb().selectChange(t)}))("ngModelChange",(function(t){return d.gc(n),d.Vb().model.filterOptions=t})),d.Lb(6,"ion-select-option",28),d.lc(7,"Economics"),d.Kb(),d.Lb(8,"ion-select-option",29),d.lc(9,"Sport"),d.Kb(),d.Lb(10,"ion-select-option",30),d.lc(11,"Movie"),d.Kb(),d.Lb(12,"ion-select-option",31),d.lc(13,"Science"),d.Kb(),d.Lb(14,"ion-select-option",32),d.lc(15,"History"),d.Kb(),d.Lb(16,"ion-select-option",33),d.lc(17,"Politics"),d.Kb(),d.Lb(18,"ion-select-option",34),d.lc(19,"Art"),d.Kb(),d.Lb(20,"ion-select-option",35),d.lc(21,"Tourism"),d.Kb(),d.Kb(),d.Kb(),d.Kb(),d.Lb(22,"div",36),d.kc(23,O,2,0,"ion-button",37),d.Kb(),d.Kb()}if(2&t){var o=d.Vb();d.yb(5),d.bc("ngModel",o.model.filterOptions),d.yb(18),d.bc("ngIf",!o.startGame)}}var L=function(){return["/account"]};function P(t,e){1&t&&(d.Lb(0,"div",39),d.Lb(1,"div",40),d.Lb(2,"ion-chip"),d.Lb(3,"ion-label",41),d.lc(4," YOUR ACCOUNT IS LOW! CLICK HERE "),d.Kb(),d.Jb(5,"br"),d.Jb(6,"ion-icon",42),d.Kb(),d.Kb(),d.Kb()),2&t&&(d.yb(6),d.bc("routerLink",d.cc(1,L)))}function Q(t,e){1&t&&(d.Lb(0,"div",39),d.Lb(1,"div",43),d.Lb(2,"div",44),d.Jb(3,"div"),d.Jb(4,"div"),d.Jb(5,"div"),d.Jb(6,"div"),d.Jb(7,"div"),d.Jb(8,"div"),d.Jb(9,"div"),d.Jb(10,"div"),d.Kb(),d.Kb(),d.Lb(11,"p",45),d.lc(12," preparing questions..."),d.Kb(),d.Kb())}var _,K,G=[{path:"",component:(_=function(){function n(e,o,i,r,s,c,a){t(this,n),this.userService=e,this.gameService=o,this.accountService=i,this.alertController=r,this.modalController=s,this.behaviorService=c,this.router=a,this.startGame=!1,this.correcQuestion=0,this.wrongQuestion=0,this.runningQuestion=0,this.timeMinute=0,this.timeSeconds=0,this.loadingGame=!1,this.correctAns=0,this.wrongAns=0,this.disableClick=!1,this.low_balance=!1,this.btnColor1="success",this.btnColor2="success",this.btnColor3="success",this.btnColor4="success",this.GameTimeMinute=0,this.GameTimeSeconds=0,this.model={filterOptions:[]}}var o,i,r;return o=n,(i=[{key:"ngOnInit",value:function(){var t=this;this.behaviorService.getGameAmount().subscribe((function(e){console.log("see AMount",e),t.currentGameAmount=e,null===e&&t.getRemoteAmount()}))}},{key:"getRemoteAmount",value:function(){var t=this;console.log("getting remote amoutn"),this.loadingGame=!0,this.gameService.getGameAmount().subscribe((function(e){var n,o;(null===(n=e.data)||void 0===n?void 0:n.amount)&&t.behaviorService.setGameAmount(null===(o=e.data)||void 0===o?void 0:o.amount),t.loadingGame=!1}),(function(e){t.loadingGame=!1}))}},{key:"ionViewWillEnter",value:function(){this.gameService.getAdminDate(),this.getQuestionForGame(),console.log("will enter")}},{key:"ngOnDestroy",value:function(){this.QuestionSub="",this.playCategory="",this.loadBalanceSub="",this.deductSub="",this.timeSeconds=0,this.timeMinute=0,clearInterval(this.timerTicker)}},{key:"getColor1",value:function(){this.btnColor1="light"}},{key:"getColor2",value:function(){this.btnColor2="light"}},{key:"getColor3",value:function(){this.btnColor3="light"}},{key:"getColor4",value:function(){this.btnColor4="light"}},{key:"getQuestionForGame",value:function(){var t=this;this.loadingGame=!0,this.QuestionSub=this.userService.getRandomQuestionsForGame().subscribe((function(e){t.gameQuestions=e.questions,t.lastQuestion=t.gameQuestions.length-1,t.loadingGame=!1}),(function(t){console.log(t)}))}},{key:"selectChange",value:function(t){this.playByCategory(t)}},{key:"playByCategory",value:function(t){var e=this;this.loadingGame=!0,this.playCategory=this.userService.playByCategory(t).subscribe((function(t){e.loadingGame=!1,e.gameQuestions=t.questions,e.lastQuestion=e.gameQuestions.length-1}))}},{key:"gameisOver",value:function(){var t=this;this.GameTimeMinute=this.timeMinute,this.GameTimeSeconds=this.timeSeconds,this.gameOver=!0,this.loadingGame=!0,this.startGame=!1;var e=3-this.timeMinute,n=60-this.timeSeconds,o=this.correctAns,i=this.wrongAns;15===o?this.presentCongratsModal(e,n,o):this.presentFailedModal(e,n,o),this.userService.postQuestionRecord({minutes:e,seconds:n,correct_qst:o,wrong_qst:i}).subscribe((function(e){t.loadingGame=!1,console.log("record submitted.."),t.gameOver=null,t.disableClick=!1,t.loadingGame=!1,t.startGame=!1,t.runningQuestion=0,t.playCategory="",t.loadBalanceSub="",t.deductSub="",t.timeSeconds=0,t.timeMinute=0,clearInterval(t.timerTicker)}))}},{key:"checkAnswer",value:function(t,e){var n=this;this.disableClick=!0,t==e?(this.correct.nativeElement.classList.add("heartBeat"),this.correctAns=this.correctAns+1):(this.wrongAns=this.wrongAns+1,this.wrong.nativeElement.classList.add("wobble")),setTimeout((function(){n.nextQuestion()}),1e3)}},{key:"startQuestion",value:function(){var t=this;this.loadingGame=!0,this.loadBalanceSub=this.accountService.loadBalanceForCalculation().subscribe((function(e){e.balance<t.currentGameAmount?(t.low_balance=!0,setTimeout((function(){t.low_balance=!1}),7e3),t.loadingGame=!1):t.deductSub=t.accountService.deductGameAmountFromAccount().subscribe((function(e){console.log("PAY RES",e),t.accountService.loadMyBalance(),t.startGame=!0,t.currentQuestion=t.gameQuestions[t.runningQuestion],t.startTimer(),t.loadingGame=!1}),(function(t){console.log("ERROR",t)}))}),(function(e){console.error(e),t.loadingGame=!1}))}},{key:"renderQuestion",value:function(){this.startGame=!0,this.disableClick=!1,this.currentQuestion=this.gameQuestions[this.runningQuestion]}},{key:"nextQuestion",value:function(){this.btnColor1="success",this.btnColor2="success",this.btnColor3="success",this.btnColor4="success",this.wrong.nativeElement.classList.remove("wobble"),this.correct.nativeElement.classList.remove("heartBeat"),this.runningQuestion<this.lastQuestion?(this.runningQuestion++,this.renderQuestion()):(this.startGame=!1,this.gameOver=!0)}},{key:"renderProgress",value:function(){for(var t=0;t<=this.lastQuestion;t++)this.progress=t}},{key:"startTimer",value:function(){var t=this,e=240;e>0&&(this.timerTicker=setInterval((function(){(0==--e||t.gameOver)&&(clearInterval(t.timerTicker),t.gameisOver(),e=0);var n=e,o=Math.floor(n/60);n-=60*o,t.timeMinute=o,t.timeSeconds=n,t.gameOver&&clearInterval(t.timerTicker)}),1e3))}},{key:"gameOverToleaderboard",value:function(){this.gameOver=void 0,this.correctAns=0,this.wrongAns=0,this.router.navigate(["/leaderboard"])}},{key:"gameOverToRecords",value:function(){this.gameOver=void 0,this.correctAns=0,this.wrongAns=0,this.router.navigate(["/myrecord"])}},{key:"presentCongratsModal",value:function(t,e,n){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function o(){var i;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.modalController.create({component:b.a,componentProps:{minutes:t,seconds:e,correctQuestion:n}});case 2:return i=o.sent,o.next=5,i.present();case 5:return o.next=7,i.onDidDismiss();case 7:case"end":return o.stop()}}),o,this)})))}},{key:"presentFailedModal",value:function(t,e,n){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function o(){var i;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return console.log("QSTTT",n),o.next=3,this.modalController.create({component:u.a,componentProps:{minutes:t,seconds:e,correctQuestion:n}});case 3:return i=o.sent,o.next=6,i.present();case 6:return o.next=8,i.onDidDismiss();case 8:case"end":return o.stop()}}),o,this)})))}},{key:"presentResult",value:function(t,e,n){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function o(){var i,r=this;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.alertController.create({header:" GAME RESULT",message:"<h1>Score  ".concat(n,'/15</h1>  <br>\n              <h4 class="text-success">Elapsed ').concat(t," min , ").concat(e," secs</h4>"),buttons:[{text:"OK",cssClass:"success",handler:function(t){r.router.navigate(["/tabs/gamesection"])}}]});case 2:return i=o.sent,o.next=5,i.present();case 5:setTimeout((function(){r.router.navigate(["/tabs/gamesection"]),i.dismiss()}),3e3);case 6:case"end":return o.stop()}}),o,this)})))}}])&&e(o.prototype,i),r&&e(o,r),n}(),_.\u0275fac=function(t){return new(t||_)(d.Ib(g.a),d.Ib(h.a),d.Ib(m.a),d.Ib(a.a),d.Ib(a.hb),d.Ib(f.a),d.Ib(c.g))},_.\u0275cmp=d.Cb({type:_,selectors:[["app-playsection"]],viewQuery:function(t,e){var n;1&t&&(d.pc(v,!0),d.pc(p,!0),d.pc(C,!0)),2&t&&(d.ec(n=d.Ub())&&(e.info=n.first),d.ec(n=d.Ub())&&(e.correct=n.first),d.ec(n=d.Ub())&&(e.wrong=n.first))},decls:16,vars:7,consts:[["slot","start"],[1,"row","d-flex","justify-content-center"],["src","assets/img/ISABI LOGO GREEN.png",1,"rounded-top","logo"],[1,"play-area","content"],["vertical","top","horizontal","center","slot","fixed",4,"ngIf"],[4,"ngIf"],["slot","fixed","class","m-0 play-area","style","width: 100%;",4,"ngIf"],["slot","fixed","class","p-2","color","light",4,"ngIf"],["style","padding-top: 20%;",4,"ngIf"],["class"," ",4,"ngIf"],["vertical","top","horizontal","center","slot","fixed"],["color","success"],[1,"mt-2","p-3","font-weight-bold"],[1,"animated"],["correct",""],[1,"font-weight-bold","text-success"],["wrong",""],[1,"animated","font-weight-bold","text-danger"],["slot","fixed",1,"m-0","play-area",2,"width","100%"],[1,"justify-content-right","d-flex","ml-2"],["id","count",1,"font-weight-bold"],[1,"m-4","text-white"],["slot","fixed","color","light",1,"p-2"],["expand","full",1,"option","mb-3",3,"color","disabled","click"],[2,"padding-top","20%"],[1,"p-3"],["color","light",1,"text-center"],["select","success","interface","popover",3,"ngModel","ngModelChange"],["value","economics",1,"text-dark"],["color","success","value","sport"],["color","success","value","movie"],["color","success","value","science"],["color","success","value","history"],["color","success","value","politics"],["color","success","value","arts"],["color","success","value","tourism"],[1,"ion-text-center","ion-padding"],["color","success","size","large","color","success",3,"click",4,"ngIf"],["color","success","size","large","color","success",3,"click"],[1,""],[1,"toast-container","mb-5"],[1,"font-weight-bold","text-danger"],["size","large","name","wallet","color","success",3,"routerLink"],[1,"toast-container"],[1,"lds-roller"],[1,"bg-dark","text-white","text-center",2,"margin-top","30%"]],template:function(t,e){1&t&&(d.Lb(0,"ion-header"),d.Lb(1,"ion-toolbar"),d.Lb(2,"ion-buttons",0),d.Jb(3,"ion-menu-button"),d.Kb(),d.Lb(4,"div",1),d.Jb(5,"img",2),d.Kb(),d.Kb(),d.Kb(),d.Lb(6,"ion-content"),d.Lb(7,"div",3),d.kc(8,y,5,2,"ion-fab",4),d.kc(9,x,11,2,"ion-item-divider",5),d.kc(10,k,7,2,"ion-card",6),d.kc(11,w,9,12,"ion-card",7),d.kc(12,M,24,2,"div",8),d.Jb(13,"br"),d.kc(14,P,7,2,"div",9),d.kc(15,Q,13,0,"div",9),d.Kb(),d.Kb()),2&t&&(d.yb(8),d.bc("ngIf",!e.gameOver),d.yb(1),d.bc("ngIf",e.startGame),d.yb(1),d.bc("ngIf",e.startGame),d.yb(1),d.bc("ngIf",e.startGame),d.yb(1),d.bc("ngIf",!e.loadingGame&&!e.startGame),d.yb(2),d.bc("ngIf",e.low_balance),d.yb(1),d.bc("ngIf",e.loadingGame))},directives:[a.w,a.cb,a.i,a.G,a.r,r.m,a.s,a.t,a.M,a.B,a.O,a.nb,a.C,a.j,a.n,a.h,a.A,a.Q,s.g,s.j,a.R,a.p,a.x,a.mb,c.h],styles:['ion-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70px;height:30px;padding:5px 0}.option[_ngcontent-%COMP%]{border-radius:10px #000;font-weight:700;color:#f7f7f7;margin-top:7px;margin-bottom:7px}.info[_ngcontent-%COMP%]{color:#fff;text-shadow:1px 1px 2px #057009,0 0 25px #04921c,0 0 5px #00008b}.content[_ngcontent-%COMP%]{background-image:url(/src/assets/img/isabi-bg.jpg);height:100%;width:100%;position:fixed;background-position:50%;background-size:cover;background-repeat:no-repeat}.play-area[_ngcontent-%COMP%]{background-color:#00351a;color:#fff}.icon-bar[_ngcontent-%COMP%]{width:100%;background-color:#555;display:flex;overflow:auto}.play-area-header[_ngcontent-%COMP%]{background-color:#063;color:#fff}#count[_ngcontent-%COMP%]{border:10px;border-color:#000}.toast-container[_ngcontent-%COMP%]{position:fixed;display:flex;justify-content:center;top:auto;margin-bottom:80px;left:0;right:0;bottom:0;z-index:999}.lds-roller[_ngcontent-%COMP%]{display:inline-block;position:relative;width:64px;height:64px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{-webkit-animation:lds-roller 1.2s cubic-bezier(.5,0,.5,1) infinite;animation:lds-roller 1.2s cubic-bezier(.5,0,.5,1) infinite;transform-origin:32px 32px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;width:6px;height:6px;border-radius:50%;background:#fbfdfc;margin:-3px 0 0 -3px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{-webkit-animation-delay:-36ms;animation-delay:-36ms}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child:after{top:50px;left:50px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){-webkit-animation-delay:-72ms;animation-delay:-72ms}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2):after{top:54px;left:45px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){-webkit-animation-delay:-.108s;animation-delay:-.108s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3):after{top:57px;left:39px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){-webkit-animation-delay:-.144s;animation-delay:-.144s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4):after{top:58px;left:32px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5){-webkit-animation-delay:-.18s;animation-delay:-.18s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5):after{top:57px;left:25px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6){-webkit-animation-delay:-.216s;animation-delay:-.216s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6):after{top:54px;left:19px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7){-webkit-animation-delay:-.252s;animation-delay:-.252s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7):after{top:50px;left:14px}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8){-webkit-animation-delay:-.288s;animation-delay:-.288s}.lds-roller[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8):after{top:45px;left:10px}@-webkit-keyframes lds-roller{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes lds-roller{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}#nominated[_ngcontent-%COMP%]{color:#fff;text-shadow:2px 2px 4px #000}#correct[_ngcontent-%COMP%]{color:#12e784;text-shadow:1px 1px 1px #025807}#correct[_ngcontent-%COMP%], #wrong[_ngcontent-%COMP%]{text-align:center}#wrong[_ngcontent-%COMP%]{color:#fc6b6b;text-shadow:1px 1px 2px #740303}.leaders[_ngcontent-%COMP%]{height:50px}']}),_)}],S=((K=function e(){t(this,e)}).\u0275mod=d.Gb({type:K}),K.\u0275inj=d.Fb({factory:function(t){return new(t||K)},imports:[[r.b,s.c,a.db,c.k.forChild(G)]]}),K)}}])}();