!function(){function n(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function e(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{X3zk:function(t,o,i){"use strict";i.r(o),i.d(o,"LoginPageModule",(function(){return k}));var r=i("SVse"),s=i("s7LF"),c=i("sZkV"),a=i("iInd"),b=i("mrSG"),l=i("8Y7J"),g=i("7LIg"),u=i("CcaC");function d(n,e){1&n&&(l.Lb(0,"div",28),l.Lb(1,"small",29),l.kc(2,"phone number or email is required"),l.Kb(),l.Kb())}function m(n,e){1&n&&(l.Lb(0,"div",28),l.Lb(1,"small",29),l.kc(2,"password is required"),l.Kb(),l.Kb())}function f(n,e){1&n&&(l.Lb(0,"div"),l.Jb(1,"ion-progress-bar",30),l.Kb())}function p(n,e){1&n&&(l.Lb(0,"div",31),l.Lb(1,"div",32),l.Jb(2,"div",33),l.Kb(),l.Kb())}function v(n,e){1&n&&(l.Lb(0,"div",31),l.Lb(1,"div",32),l.Lb(2,"div",33),l.Jb(3,"div"),l.Jb(4,"div"),l.Jb(5,"div"),l.Jb(6,"div"),l.Jb(7,"div"),l.Jb(8,"div"),l.Jb(9,"div"),l.Jb(10,"div"),l.Kb(),l.Kb(),l.Kb())}var h,L,x,w=function(){return["/forgetpassword"]},C=[{path:"",component:(h=function(){function t(e,o,i,r,s,c,a){n(this,t),this.loadingController=e,this.fb=o,this.alertController=i,this.toastController=r,this.gameService=s,this.router=c,this.userService=a,this.phoneRegex=/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/,this.model={number:"",password:""}}var o,i,r;return o=t,(i=[{key:"ngOnInit",value:function(){this.loading=!1}},{key:"presentFailNetwork",value:function(){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.toastController.create({message:"No internet connection!!!",duration:2e3});case 2:n.sent.present();case 3:case"end":return n.stop()}}),n,this)})))}},{key:"login",value:function(n){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var e=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log("login fire"),this.loading=!0,this.userService.login(this.model).subscribe((function(n){e.userService.setToken(n.token),e.userService.loadBalance(),console.log("RESPONSE FROM LOGIN"),localStorage.setItem("user_id",n.doc.user_id),localStorage.setItem("appUser",n.doc.username),localStorage.setItem("user-role",n.doc.role),e.loading=!1,e.router.navigate(["/tabs/gamesection"])}),(function(n){e.loading=!1,n.error?(e.gameService.presentToast(n.error),console.log("LOGIN ERROR"),console.log(n.statusText)):(e.gameService.presentToast(n.statusText),console.log("server error"))}));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"register",value:function(){this.router.navigate(["/register"])}},{key:"presentAlertConfirm",value:function(n){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"Ooops!",message:' <strong class="text-danger"> '.concat(n,"</strong>"),buttons:[{text:"Try again",handler:function(){console.log("Confirm Okay")}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e,this)})))}}])&&e(o.prototype,i),r&&e(o,r),t}(),h.\u0275fac=function(n){return new(n||h)(l.Ib(c.eb),l.Ib(s.b),l.Ib(c.a),l.Ib(c.ob),l.Ib(g.a),l.Ib(a.g),l.Ib(u.a))},h.\u0275cmp=l.Cb({type:h,selectors:[["app-login"]],decls:47,vars:10,consts:[["size","12"],[1,"ion-padding","logo"],["src","assets/img/ISABI LOGO GREEN.png","alt","isabi logo","title","isabi logo"],["size-xs","12","size-sm","10","offset-md","1","size-md","6","offset-md","3","size-lg","4","offset-lg","4"],["name","form",1,"form",3,"submit"],["loginForm","ngForm"],[1,"utility"],[1,"text-input"],["autofocus","","type","text","placeholder","Email or Phone","name","number","clearInput","","autocomplete","off","minlength","11","required","true",1,"pl-4","pr-2",3,"ngModel","ngModelChange"],["emailUser","ngModel"],["name","person-outline",1,"mr-2"],["class","text-center",4,"ngIf"],["type","password","input","","placeholder","Password","name","password","minlength","6","clearInput","","required","true",1,"pl-4","pr-2",3,"ngModel","ngModelChange"],["password","ngModel"],["name","lock-closed-outline",1,"mr-2"],[1,"ion-float-right","forgot-password",3,"routerLink"],["shape","round","expand","block","type","submit",1,"login",3,"disabled","submit"],[4,"ngIf"],["size","12",1,"sign-up"],[1,"text-dark"],[1,"font-weight-bold","text-dark",3,"click"],[1,"ion-text-center","mt-5"],["size-xs","6","offset-xs","3","size-sm","6","offset-sm","3","size-md","3","offset-md","4.5","size-lg","2","offset-lg","5",1,"social-icons"],["src","/assets/img/Facebook_Logo.png","alt","facebook logo"],["src","assets/img/google-plus-logo.png","alt","google plus logo"],["src","assets/img/twitter--logo.png","alt","twitter logo"],["class","",4,"ngIf"],["class"," ",4,"ngIf"],[1,"text-center"],[1,"text-danger"],["type","indeterminate"],[1,""],[1,"toast-container"],[1,"lds-roller"]],template:function(n,e){if(1&n){var t=l.Mb();l.Lb(0,"ion-content"),l.Lb(1,"ion-grid"),l.Lb(2,"ion-row"),l.Lb(3,"ion-col",0),l.Lb(4,"section",1),l.Jb(5,"img",2),l.Kb(),l.Kb(),l.Kb(),l.Lb(6,"ion-row"),l.Lb(7,"ion-col",3),l.Lb(8,"form",4,5),l.Tb("submit",(function(){l.gc(t);var n=l.fc(9);return e.login(n)})),l.Lb(10,"div",6),l.Lb(11,"div",7),l.Lb(12,"ion-input",8,9),l.Tb("ngModelChange",(function(n){return e.model.number=n})),l.Jb(14,"ion-icon",10),l.Kb(),l.Kb(),l.jc(15,d,3,0,"div",11),l.Kb(),l.Lb(16,"div",6),l.Lb(17,"div",7),l.Lb(18,"ion-input",12,13),l.Tb("ngModelChange",(function(n){return e.model.password=n})),l.Jb(20,"ion-icon",14),l.Kb(),l.Kb(),l.jc(21,m,3,0,"div",11),l.Kb(),l.Lb(22,"ion-text",15),l.kc(23,"Forgot password? "),l.Kb(),l.Lb(24,"ion-button",16),l.Tb("submit",(function(){l.gc(t);var n=l.fc(9);return e.login(n)})),l.kc(25,"Login"),l.Kb(),l.jc(26,f,2,0,"div",17),l.Kb(),l.Lb(27,"ion-row"),l.Lb(28,"ion-col",18),l.Lb(29,"p",19),l.kc(30,"Don't have account? "),l.Lb(31,"ion-label",20),l.Tb("click",(function(){return e.register()})),l.kc(32,"Sign up "),l.Kb(),l.Kb(),l.Kb(),l.Kb(),l.Kb(),l.Kb(),l.Lb(33,"ion-row"),l.Lb(34,"ion-col",21),l.Lb(35,"ion-label"),l.kc(36,"Sign in with"),l.Kb(),l.Lb(37,"ion-row"),l.Lb(38,"ion-col",22),l.Lb(39,"div"),l.Jb(40,"img",23),l.Kb(),l.Lb(41,"div"),l.Jb(42,"img",24),l.Kb(),l.Lb(43,"div"),l.Jb(44,"img",25),l.Kb(),l.Kb(),l.Kb(),l.Kb(),l.Kb(),l.Kb(),l.jc(45,p,3,0,"div",26),l.jc(46,v,11,0,"div",27),l.Kb()}if(2&n){var o=l.fc(9),i=l.fc(13),r=l.fc(19);l.xb(12),l.bc("ngModel",e.model.number),l.xb(3),l.bc("ngIf",i.dirty&&i.errors),l.xb(3),l.bc("ngModel",e.model.password),l.xb(3),l.bc("ngIf",r.dirty&&r.errors),l.xb(1),l.bc("routerLink",l.cc(9,w)),l.xb(2),l.bc("disabled",!o.valid),l.xb(2),l.bc("ngIf",e.loading),l.xb(19),l.bc("ngIf",e.loading),l.xb(1),l.bc("ngIf",e.loading)}},directives:[c.r,c.u,c.L,c.q,s.n,s.h,s.i,c.y,c.nb,s.d,s.m,s.g,s.j,c.w,r.m,c.X,c.lb,a.h,c.h,c.B,c.H],styles:["ion-content[_ngcontent-%COMP%]{--background:var(--ion-color-primary-contrast)}ion-content[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:3rem;margin-bottom:2rem}ion-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{min-height:250px}ion-content[_ngcontent-%COMP%]   .utility[_ngcontent-%COMP%]{margin-bottom:1.2rem}ion-content[_ngcontent-%COMP%]   .text-input[_ngcontent-%COMP%]{border:1px solid var(--ion-color-primary);border-radius:35px}ion-content[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-size:.8rem;margin-bottom:2rem}ion-content[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background:var(--ion-color-primary)}ion-content[_ngcontent-%COMP%]   .sign-up[_ngcontent-%COMP%]{text-align:center;font-size:.9rem;margin-top:2rem}ion-content[_ngcontent-%COMP%]   .sign-up[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{cursor:pointer}ion-content[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly}ion-content[_ngcontent-%COMP%]   .social-icons[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:30px;width:30px}.toast-container[_ngcontent-%COMP%]{position:fixed;display:flex;justify-content:center;top:auto;margin-bottom:80px;left:0;right:0;bottom:0;z-index:999}"]}),h)}],O=((x=function e(){n(this,e)}).\u0275mod=l.Gb({type:x}),x.\u0275inj=l.Fb({factory:function(n){return new(n||x)},imports:[[a.k.forChild(C)],a.k]}),x),k=((L=function e(){n(this,e)}).\u0275mod=l.Gb({type:L}),L.\u0275inj=l.Fb({factory:function(n){return new(n||L)},imports:[[r.b,s.c,c.cb,O]]}),L)}}])}();