<ion-header>
  <ion-toolbar>
    <ion-item>
      <ion-button (click)="dismiss()">
        <ion-icon slot="start" name="close"></ion-icon>
      </ion-button>
    </ion-item>
  </ion-toolbar>
</ion-header>



<ion-content ion-padding>

  <ion-grid>
    <ion-row>
      <ion-col sizeSm="12" sizeXs="12" sizeLg="8" offsetLg="2" sizeMd="10" offsetMd="1">

        <ion-card>

          <form #eventForm="ngForm" name="eventform">
            <h5 class="ion-text-center">UPDATE EVENT</h5>


            <!-- image -->
            <div class="mt-3 mb-2">
              <ion-progress-bar *ngIf="loading" type="indeterminate"></ion-progress-bar>
              <div class="ion-text-center">
                <div class="cover-photo">
                  <button *ngIf="!image" onclick="document.getElementById('single-image').click();">
                    <i class="fas fa-image fa-5x lat"></i>
                  </button>
                  <input id="single-image" accept="image/*" #singleImage (change)="addImagesFirebase($event)"
                    type="file" name="name" style="display: none" />

                  <app-image-custom-spinner onclick="document.getElementById('single-image').click();" *ngIf="image"
                    [imageUrl]="image"></app-image-custom-spinner>
                </div>
              </div>
            </div>
            <!-- end image -->

            <ion-col>
              <ion-item color="light">
                <div class="text-input ">
                  <ion-label position="floating"> <small class="text-danger ">*</small> event name</ion-label>
                  <ion-input type="text" #eventName="ngModel" name="eventName" [(ngModel)]="eventModel.eventName"
                    required="true"></ion-input>
                </div>
              </ion-item>
            </ion-col>

            <ion-row>
              <ion-col size="6">
                <ion-item color="light">
                  <ion-label position="floating">Start date</ion-label>
                  <div class="text-input ">

                    <ion-input type="date" name="date" [value]="eventModel?.startDate">
                    </ion-input>
                  </div>
                </ion-item>
              </ion-col>
              <ion-col size="6">
                <ion-item color="light">
                  <ion-label position="floating">End date</ion-label>
                  <div class="text-input ">
                    <ion-input type="date" name="date" [value]="eventModel?.endDate"></ion-input>
                  </div>
                </ion-item>
              </ion-col>
            </ion-row>

            <ion-col>
              <ion-item color="light">
                <div class="text-input ">
                  <ion-label position="floating"><small class="text-danger ">*</small> company name</ion-label>
                  <ion-input type="text" #companyName="ngModel" name="companyName" [(ngModel)]="eventModel.companyName"
                    required="true"></ion-input>
                </div>
              </ion-item>
            </ion-col>

            <ion-col>
              <ion-item color="light">
                <div class="text-input ">
                  <ion-label position="floating"><small class="text-danger ">*</small> address</ion-label>
                  <ion-input type="text" #address="ngModel" name="address" [(ngModel)]="eventModel.address"
                    required="true"></ion-input>
                </div>
              </ion-item>
            </ion-col>

            <ion-col>
              <ion-item color="light">
                <div class="text-input ">
                  <ion-label position="floating"><small class="text-danger ">*</small> contact number</ion-label>
                  <ion-input type="text" #contactNumber="ngModel" name="contactNumber"
                    [(ngModel)]="eventModel.contactNumber" required="true"></ion-input>
                </div>
              </ion-item>
            </ion-col>

            <ion-col>
              <ion-item color="light">
                <div class="text-input ">
                  <ion-label position="floating"><small class="text-danger ">*</small> about event</ion-label>
                  <ion-input type="text" #aboutEvent="ngModel" name="aboutEvent" [(ngModel)]="eventModel.aboutEvent"
                    required="true"></ion-input>
                </div>
              </ion-item>
            </ion-col>

            <ion-col *ngIf="eventModel.type === 'TICKETING'">
              <ion-item color="light">
                <div class="text-input ">
                  <ion-label position="floating"><small class="text-danger ">*</small> venue</ion-label>
                  <ion-input type="text" #venue="ngModel" name="venue" [(ngModel)]="eventModel.venue" required="true">
                  </ion-input>
                </div>
              </ion-item>
            </ion-col>


            <ion-row>

              <ion-col *ngIf="eventModel.type === 'VOTING'">
                <ion-item color="light">
                  <div class="text-input ">
                    <ion-label position="floating">cost per vote</ion-label>
                    <ion-input type="text" #costPerVote="ngModel" name="costPerVote"
                      [(ngModel)]="eventModel.costPerVote"></ion-input>
                  </div>
                </ion-item>
              </ion-col>



              <ion-col>
                <ion-item color="light">
                  <div class="text-input ">
                    <ion-label position="floating">Start time</ion-label>
                    <ion-input type="time" #date="ngModel" name="date" [value]="eventModel?.startTime"
                      [(ngModel)]="eventModel.startTime"></ion-input>
                  </div>
                </ion-item>
              </ion-col>




              <ion-col *ngIf="eventModel.type === 'VOTING'">
                <ion-item color="light">
                  <div class="text-input ">
                    <ion-label position="floating">number of slot</ion-label>
                    <ion-input type="text" #numberOfSlot="ngModel" name="numberOfSlot"
                      [(ngModel)]="eventModel.numberOfSlot"></ion-input>
                  </div>
                </ion-item>
              </ion-col>

              <ion-col>
                <ion-item color="light">
                  <div class="text-input ">
                    <ion-label position="floating">i-sabi sharing ratio</ion-label>
                    <ion-input type="text" #sharingRatio_isabi="ngModel" name="sharingRatio_isabi"
                      [(ngModel)]="eventModel.sharingRatio_isabi"></ion-input>
                  </div>
                </ion-item>
              </ion-col>

              <ion-col>
                <ion-item color="light">
                  <div class="text-input ">
                    <ion-label position="floating">company's sharing ratio</ion-label>
                    <ion-input type="text" #sharingRatio_company="ngModel" name="sharingRatio_company"
                      [(ngModel)]="eventModel.sharingRatio_company"></ion-input>
                  </div>
                </ion-item>
              </ion-col>

              <ion-col>
                <ion-item color="light">
                  <div class="text-input ">
                    <ion-label position="floating">busin's partner sharing ratio</ion-label>
                    <ion-input type="text" #businessSharingRatio="ngModel" name="businessSharingRatio"
                      [(ngModel)]="eventModel.businessSharingRatio"></ion-input>
                  </div>
                </ion-item>
              </ion-col>
            </ion-row>

            <ion-col>
              <ion-item color="light">
                <div class="text-input ">
                  <ion-label position="floating">account number</ion-label>
                  <ion-input type="text" #accountNumber="ngModel" name="accountNumber"
                    [(ngModel)]="eventModel.accountNumber"></ion-input>
                </div>
              </ion-item>
            </ion-col>

            <ion-row>
              <ion-col>
                <ion-item color="light">
                  <div class="text-input ">
                    <ion-label position="floating">account name</ion-label>
                    <ion-input type="text" #accountName="ngModel" name="accountName"
                      [(ngModel)]="eventModel.accountName"></ion-input>
                  </div>
                </ion-item>
              </ion-col>

              <ion-col>
                <ion-item color="light">
                  <div class="text-input ">
                    <ion-label position="floating">bank name</ion-label>
                    <ion-input type="text" #bankName="ngModel" name="bankname" [(ngModel)]="eventModel.bankName">
                    </ion-input>
                  </div>
                </ion-item>
              </ion-col>
            </ion-row>
            <ion-list>

              <ion-item color="light">
                <ion-input type="text" #bankname="ngModel" name="bankname" [(ngModel)]="eventModel.eventOwner"
                  placeholder="(optional username)  event owner"></ion-input>
              </ion-item>

              
              <ion-item color="light">
                <ion-input type="text" #merchant_code="ngModel" name="merchant_code" [(ngModel)]="eventModel.merchant_code"
                  placeholder="Mechant code"></ion-input>
              </ion-item>

              
              <ion-item color="light">
                <ion-input type="text" #pay_item_id="ngModel" name="pay_item_id" [(ngModel)]="eventModel.pay_item_id"
                  placeholder="pay item id"></ion-input>
              </ion-item>

              <ion-item color="light">
                <div class="p-3">
                  <ion-button (click)="updateEvent()" *ngIf=" eventForm.valid">update</ion-button>

                </div>
              </ion-item>
            </ion-list>


          </form>
        </ion-card>

      </ion-col>
    </ion-row>
  </ion-grid>

</ion-content>