<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <div class="logo">
      <img class="rounded-top" src="assets/img/ISABI LOGO GREEN.png">
    </div>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="curved-section">
    
    <div class="game_categories" style="display: none;">
      <h2>Games</h2>
    <ul>
      <li>
        <div class="icon"></div>
        <div class="details">
          <p class="name">Sports</p>
          <p>70 players</p>
        </div>
        <p>TO</p>
      </li>
    </ul>
    </div>
    <div class="question_section">
      <div class="question_section__header">
        <p class="question_section--pass">5</p>
        <div class="round_timer">
          <!-- TODO: Implement Round timer -->
          <!-- TODO: Abstract Round timer to component from timer component -->
        </div>
        <p class="question_section--fail">3</p>
      </div>
      <div class="score_bar">
        <!-- TODO: Implement Score bar (might use gradient or clip-path) -->
      </div>
      <div class="question_header">Question 1/15</div>
      <h3 class="question">
        What is your name?
      </h3>

      <ol class="question_options">
        <li class="question_option">
          <input type="checkbox" name="question_option" id="">
          <p>Change of plan</p>
        </li>
        <li class="question_option">
          <input type="checkbox" name="question_option" id="">
          <p>Change of plan</p>
        </li>
        <li class="question_option">
          <input type="checkbox" name="question_option" id="">
          <p>Change of plan</p>
        </li>
        <li class="question_option">
          <input type="checkbox" name="question_option" id="">
          <p>Change of plan</p>
        </li>
      </ol>
    </div>
    <div class="question_support">
      <p>Is there anything wrong with the question? Click here!</p>
    </div>
  </div>

  <div class="play-area content" style="display: none;">
    <div *ngIf="startGame" class="question-container">
      <!-- timer -->
      <div class="timer" *ngIf="!gameOver">
        <b>{{timeMinute}} : {{timeSeconds}}</b>
      </div>
      <!-- question section -->
      <ion-card *ngIf="startGame" class="play-area">
        <!-- counter -->
        <div class="count">
          <div class="cont" #correct>
            <p>{{correctAns}}</p>
            <div class="indicator right"></div>
          </div>
          <div class="cont rev" #wrong>
            <p>{{wrongAns}}</p>
            <div class="indicator wrong"></div>
          </div>
        </div>
        <!-- question number-->
        <div class="question-number">
          Question <span>{{runningQuestion + 1}}</span>/15
        </div>
        <!-- question -->
        <div class="question">
          <p>{{currentQuestion?.question}}</p>
        </div>
      </ion-card>

      <!-- select answer -->
      <div class="answers" *ngIf="startGame">
        <ion-button [color]="btnColor1" expand="full" class="option mb-3" [disabled]="disableClick"
          (click)="checkAnswer(currentQuestion?.option1, currentQuestion?.answer); getColor1()">
          {{currentQuestion?.option1}}
        </ion-button>

        <ion-button [color]="btnColor2" expand="full" class="option mb-3" [disabled]="disableClick"
          (click)="checkAnswer(currentQuestion?.option2, currentQuestion?.answer); getColor2()">
          {{currentQuestion?.option2}}
        </ion-button>

        <ion-button [color]="btnColor3" expand="full" class="option mb-3" [disabled]="disableClick"
          (click)="checkAnswer(currentQuestion?.option3, currentQuestion.answer); getColor3() ">
          {{currentQuestion?.option3}}
        </ion-button>

        <ion-button [color]="btnColor4" expand="full" class="option mb-3" [disabled]="disableClick"
          (click)="checkAnswer(currentQuestion?.option4, currentQuestion.answer); getColor4()">
          {{currentQuestion?.option4}}
        </ion-button>
      </div>
    </div>


    <div class="category-container" *ngIf="!loadingGame  && !startGame">
      <div class="timer" *ngIf="!gameOver">
        <b>{{timeMinute}} : {{timeSeconds}}</b>
      </div>

        <div class="logo-container">
          <img class="img" src="assets/img/ISABI LOGO GREEN.png">
        </div>
        <!-- select filter -->
        <ion-item>
          <ion-label class="text-center">select your category</ion-label>
          <ion-select select="success" interface="popover" (ngModelChange)="selectChange($event)"
            [(ngModel)]="model.filterOptions">
            <ion-select-option class="text-dark" value="economics">Economics</ion-select-option>
            <ion-select-option color="success" value="sport">Sport</ion-select-option>
            <ion-select-option color="success" value="movie">Movie</ion-select-option>
            <ion-select-option color="success" value="science">Science</ion-select-option>
            <ion-select-option color="success" value="history">History</ion-select-option>
            <ion-select-option color="success" value="politics">Politics</ion-select-option>
            <ion-select-option color="success" value="arts">Art</ion-select-option>
            <ion-select-option color="success" value="tourism">Tourism</ion-select-option>
          </ion-select>
        </ion-item>

      <div class="ion-text-center ion-padding">
        <ion-button color="success" size="medium" color="success" *ngIf="!startGame" (click)="startQuestion()">
          PLAY NOW !</ion-button>
      </div> 
    </div>



    <br>

    <div *ngIf="low_balance" class=" ">
      <div class="toast-container mb-5">
        <ion-chip>
          <!-- <ion-icon name="hand" color="danger"></ion-icon> -->
          <ion-label class="font-weight-bold text-danger"> YOUR ACCOUNT IS LOW! CLICK HERE </ion-label> <br>
          <ion-icon [routerLink]="['/account']" size="large" name="wallet" color="success"></ion-icon>
        </ion-chip>
      </div>
    </div>

    <!-- loader -->
    <div *ngIf="loadingGame" class=" ">
      <div class="toast-container ">
        <div class="lds-roller">
          <div></div>
          <div></div>
          <div></div>
          <div></div>
          <div></div>
          <div></div>
          <div></div>
          <div></div>
        </div>
      </div>
      <p style="margin-top: 30%;" class="bg-dark  text-white text-center"> preparing questions...</p>
    </div>
  </div>

</ion-content>